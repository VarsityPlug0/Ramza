# Ramza's Chillas - Deployment Summary

## Application Overview
This is a Django-based fast food restaurant website with comprehensive content management capabilities. The application allows administrators full control over all text and images on the site.

## Key Features
- Responsive design with consistent styling
- Admin-controlled content management for all text and images
- Menu management system
- Order processing capabilities
- Custom admin dashboard
- Currency display in South African Rand (R)

## Deployment Configuration

### Environment Variables
- `DATABASE_URL`: PostgreSQL database connection string
- `SECRET_KEY`: Django secret key (auto-generated by Render)
- `WEB_CONCURRENCY`: Number of Gunicorn worker processes (set to 4)

### Database Configuration
The application is configured to use a PostgreSQL database as specified in the Render configuration. The database connection string is:
```
postgresql://capitalxdb_user:cErzFTrAr2uuJ180NybFaWBVnr2gMLdI@dpg-d30rrh7diees7389fulg-a/capitalxdb
```

### Static and Media Files
- Static files are served using WhiteNoise
- Media files (uploaded images) are stored locally in the `media` directory
- Static files are collected to the `staticfiles` directory during deployment

### Migration Process
The application ensures migrations are applied automatically during deployment through multiple approaches:

1. **Startup Script**: The [start.bat](file:///c%3A/Users/money/Bevan%20The%20IT%20GUY/absa/ramzas-chillas/start.bat) script runs `python manage.py migrate --noinput` before starting the web server
2. **Manual Setup**: The [manual_setup.py](file://c:\Users\money\Bevan%20The%20IT%20GUY\absa\ramzas-chillas\manual_setup.py) script can also be used to apply migrations
3. **Post-Deploy Hook**: The [migrate.bat](file:///c%3A/Users/money/Bevan%20The%20IT%20GUY/absa/ramzas-chillas/migrate.bat) script can be configured as a post-deploy script in Render

### Superuser Creation
The application automatically creates a default superuser during startup if one doesn't exist:
- Username: `admin`
- Email: `admin@example.com`
- Password: `admin123`

A dedicated script [create_superuser.py](file:///c%3A/Users/money/Bevan%20The%20IT%20GUY/absa/ramzas-chillas/create_superuser.py) handles this process.

### Start Process
Render uses a batch script ([start.bat](file:///c%3A/Users/money/Bevan%20The%20IT%20GUY/absa/ramzas-chillas/start.bat)) that:
1. Applies database migrations
2. Creates a superuser if needed
3. Starts Gunicorn with the Django application

## Admin Access
- Admin dashboard: `/dashboard/`
- Django admin: `/admin/`
- Default superuser credentials: admin / admin123

## Migration Best Practices

### When to Run `makemigrations`
- Only run `python manage.py makemigrations` when you make changes to your Django models
- This command generates new migration files that need to be committed to version control
- Never run this command on the production server

### When to Run `migrate`
- Run `python manage.py migrate` every time you deploy new code
- This command applies existing migrations to the database
- This is automatically handled in our deployment process

## Render Configuration

### Required Settings in Render Dashboard
1. **Build Command**: `pip install -r requirements.txt`
2. **Start Command**: `start.bat`
3. **Environment Variables**:
   - `DATABASE_URL`: Your PostgreSQL connection string
   - `SECRET_KEY`: Your Django secret key
   - `WEB_CONCURRENCY`: 4 (or as needed)

### Optional Post-Deploy Script
In the Render dashboard under "Settings" â†’ "Advanced", you can configure:
- **Post-Deploy Script**: `migrate.bat`

This provides an additional layer of ensuring migrations are applied.

## Troubleshooting
If you encounter any issues:

1. **Database Relation Errors** (like "relation 'auth_user' does not exist"):
   - Check that migrations are running during deployment
   - Verify the database connection string is correct
   - Manually run migrations with `python manage.py migrate`

2. **Migration Issues**:
   - Check Render logs for migration errors
   - Run `python manage.py showmigrations` to see migration status
   - Ensure all migration files are committed to version control

3. **Superuser Access**:
   - If you can't log in, check that the superuser was created
   - You can manually create a superuser with `python manage.py createsuperuser`

## Support
For any deployment issues or questions, please contact the development team.